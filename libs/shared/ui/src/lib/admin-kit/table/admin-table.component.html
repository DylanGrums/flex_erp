<div class="overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm dark:border-zinc-800 dark:bg-zinc-900">
  <p-table
    [value]="displayRows"
    [loading]="loading"
    [rowHover]="true"
    [rowTrackBy]="trackByRow"
    [dataKey]="dataKey"
    styleClass="p-datatable-sm"
    [tableStyle]="{ width: '100%' }"
  >
    <ng-template pTemplate="header">
      <tr class="bg-gray-50 dark:bg-zinc-800/40">
        <th
          *ngFor="let column of columns"
          [style.width]="column.width"
          [ngClass]="getHeaderClass(column)"
          [attr.aria-sort]="getAriaSort(column)"
          scope="col"
        >
          <button
            *ngIf="column.sortable; else headerLabel"
            type="button"
            class="flex w-full items-center gap-2 text-left"
            (click)="toggleSort(column)"
          >
            <span>{{ column.header }}</span>
            <i class="text-[0.75rem]" [ngClass]="getSortIcon(column)"></i>
          </button>
          <ng-template #headerLabel>{{ column.header }}</ng-template>
        </th>
        <th *ngIf="rowActions?.length" class="px-4 py-3 text-right">
          <span class="sr-only">{{ 'admin.table.actions' | transloco }}</span>
        </th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-row>
      <tr class="border-t border-gray-200 dark:border-zinc-800">
        <td *ngFor="let column of columns" [ngClass]="getCellClass(column)">
          {{ getCellValue(row, column) }}
        </td>
        <td *ngIf="rowActions?.length" class="px-4 py-3 text-right">
          <button
            pButton
            type="button"
            icon="pi pi-ellipsis-v"
            class="p-button-text"
            (click)="openRowMenu($event, row)"
            [attr.aria-label]="'admin.table.rowActions' | transloco"
          ></button>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td [attr.colspan]="totalColumns">
          <div class="flex flex-col items-center justify-center py-10 text-sm text-gray-500 dark:text-zinc-400">
            <div class="text-base font-semibold text-gray-700 dark:text-zinc-200">
              {{ emptyState?.title ?? ('admin.table.emptyTitle' | transloco) }}
            </div>
            <div class="mt-1">
              {{ emptyState?.description ?? ('admin.table.emptyDescription' | transloco) }}
            </div>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <p-menu #rowMenu [popup]="true" [model]="menuItems" [appendTo]="'body'"></p-menu>
</div>
